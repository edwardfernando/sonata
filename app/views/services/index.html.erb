<h3>Service Available</h3>

<div class="row">
  <div class="col-md-3">
    <div class="inline-date-picker"></div>
	</div>
  <div class="col-md-9">
		<div style="padding-top: 10px; padding-bottom: 20px;">

      <div class="btn-group">
        <!--
        <a href="<%= services_path %>?date=" class="btn btn-default btn-xs">
          <span class="glyphicon glyphicon-arrow-left"></span> Previous Day
        </a>
      -->
        <a href="<%= services_path %>?date=" class="btn btn-default btn-xs">
          <span class="glyphicon glyphicon-flag"></span> Today
        </a>
        <!--
        <a href="<%= services_path %>?date=" class="btn btn-default btn-xs">
          Next Day <span class="glyphicon glyphicon-arrow-right"></span>
        </a>
      -->
      </div>

      <a href="<%= services_path %>" class="btn btn-default btn-xs">
        <span class="glyphicon glyphicon-list-alt"></span> Show All
      </a>

      <a href="<%= new_service_path %>" class="btn btn-default btn-xs">
        <span class="glyphicon glyphicon-plus"></span> Add
      </a>
		</div>

		<table class="table table-hover table-bordered">
			<thead>
				<tr>
					<th>Name</th>
					<th>Desc</th>
					<th>Date</th>
					<th>#</th>
				</tr>
			</thead>

			<tbody>

				<% if @services.empty? %>
				<tr>
						<td colspan="4">No service found. <%= link_to 'Create one?', new_service_path %> </td>
				</tr>
				<% end %>

				<% @services.each do |a| %>
				<tr>
					<td><%= a.name %></td>
					<td><%= a.description %></td>
					<td><%= a.date %></td>
					<td>
            <div class="btn-group">
  						<a href="javascript:" class="btn btn-default btn-xs" data-toggle="modal" data-target="#schedules-<%= a.id %>">
  							<span class="glyphicon glyphicon-eye-open"></span> View
  						</a>
  						<a href="<%= edit_service_path(a) %>" class="btn btn-default btn-xs">
  							<span class="glyphicon glyphicon-edit"></span> Edit
  						</a>
  						<a data-confirm="Are you sure want to delete this service?" data-method="delete" href="<%= service_path(a) %>" rel="nofollow" class="btn btn-default btn-xs">
  							<span class="glyphicon glyphicon-remove-circle"></span> Delete
  						</a>
            </div>

						<div class="modal fade" id="schedules-<%= a.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
										<h4 class="modal-title" id="myModalLabel"><%= a.name %></h4>
									</div>
									<div class="modal-body">
										<p><strong>Description:</strong> <%= a.description %></p>
										<p><strong>Date:</strong> <%= a.date %></p>

										<table class="table table-hover table-bordered" id="person-incharge-table">
											<thead>
												<tr>
													<th>Role</th>
													<th>Person</th>
												</tr>
											</thead>

											<tbody>
											<% a.schedules.each do |s| %>
												<tr>
														<td><%= s.role.name %></td>
														<td><%= s.person.name %></td>
												</tr>
											<% end %>
											</tbody>
										</table>
									</div>
									<div class="modal-footer">
										<a href="<%= edit_service_path(a) %>" class="btn btn-default">Edit</a>
										<a href="javasript:" class="btn btn-primary" data-dismiss="modal">Close</a>
									</div>
								</div>
							</div>
						</div>

					</td>
				</tr>
				<% end %>

			</tbody>
		</table>
	</div>
</div>
